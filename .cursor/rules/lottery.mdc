---
description: 
globs: 
alwaysApply: true
---
description: 'DAEBAK_AI ë¡œë˜ ì¶”ì²œ ì‹œìŠ¤í…œ êµ¬ì¡° ê·œì¹™ (ë³µì œ ì¶”ì²¨ê¸° ê¸°ë°˜ ì˜ˆì¸¡ ê°•í™”, ë©€í‹°ëª¨ë¸ ì•™ìƒë¸”, ê°•í™”í•™ìŠµ/ë¶ˆí™•ì‹¤ì„± í†µí•©, ìµœì¢… êµ¬ì¡° í™•ì •)'
âœ… ì „ì²´ ì‹¤í–‰ êµ¬ì¡° (ì—…ë°ì´íŠ¸ ë°˜ì˜)
ë¶„ì„ ë° ì „ì²˜ë¦¬ (run1_00_data_analysis.py)

PatternAnalyzer, PairAnalyzer, ClusterAnalyzer, TrendAnalyzer, RaretyAnalyzer í¬í•¨

.json, .npy, .names.json ë¶„ì„ ê²°ê³¼/ë²¡í„° ì €ì¥

ë²¡í„° ìˆ˜: 70ê°œ ì´ìƒ, ì´ìƒì¹˜ ì œê±°, ì •ê·œí™”

ë¹„ë‹¹ì²¨ ì¡°í•© ìƒ˜í”Œë§

NegativeSampler, RaretyAwareSampler, ì¤‘ë³µ ì œê±°/ê±°ë¦¬ í™•ë³´ í¬í•¨

.npy íŒŒì¼ë¡œ ìƒ˜í”Œ ì €ì¥

ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ í›„ë³´ ì ìˆ˜í™”

StatisticalModel + ML ëª¨ë¸: LightGBM, XGBoost, RandomForest, CatBoost

ìœ„í—˜ë„ í•„í„°: rule_filter, risk_score_analyzer

ì¶œë ¥: ì¡°í•©ë³„ ì ìˆ˜

ê°•í™”í•™ìŠµ ì •ì±… í•™ìŠµ

Q-table, REINFORCE, DQN, PPO

backtester.pyë¡œ ROI ê¸°ë°˜ reward ìƒì„±

ë³´ìƒ ê¸°ì¤€: 3ê°œ=1ì , 6ê°œ=100ì  (ë³´ë„ˆìŠ¤ ì—†ìŒ)

ë”¥ëŸ¬ë‹ ëª¨ë¸ í•™ìŠµ

ëª¨ë¸: MLP, AE, LSTM, GNN, Transformer, BayesianNet

UnifiedTrainer ê¸°ë°˜ í•™ìŠµ (AMP ì‚¬ìš©)

LSTM: segment history í™œìš© / Transformer: attention ê¸°ë°˜

ì¶”ì²œ ì¡°í•© ìƒì„± ë° ì•™ìƒë¸”

recommendation_engine.py ì‹¤í–‰

ëª¨ë¸ë³„ ì ìˆ˜ ì¡°í•©:

ML: LGBM, XGB, CatBoost

DL: MLP, AE, LSTM, GNN, Transformer

RL: Q-table/PPO ì ìˆ˜

Meta Learner: íšŒì°¨ë³„ ROI ê¸°ë°˜ ê°€ì¤‘ì¹˜ ìë™ ì¡°ì ˆ

ìµœì¢… ì¡°í•©: 5ì„¸íŠ¸ ì¶”ì²œ

ì„±ëŠ¥ í‰ê°€ ë° í”¼ë“œë°±

backtester.py, diversity_evaluator.pyë¡œ ì„±ëŠ¥ í‰ê°€

ì¶”ì²œ diversity, ROI, ì ì¤‘ë¥  ê¸°ë¡

Meta Learner í”¼ë“œë°± ë°˜ì˜

âœ… ìƒˆë¡œ ë°˜ì˜ëœ ì •ì±… ì‚¬í•­ ìš”ì•½
í•­ëª©	ì ìš© ë‚´ìš©
âœ… ë²¡í„° ì°¨ì› í™•ëŒ€	70ê°œ ì´ìƒ í•„ìˆ˜, í•„ìˆ˜ í•­ëª© ê²€ì¦ê¸° ì ìš©
âœ… ë²¡í„° ëˆ„ë½ ì°¨ë‹¨	.npy.shape[1] != .names.json ì‹œ ì˜ˆì™¸ ë°œìƒ
âœ… ëª¨ë¸ ì¶”ê°€	CatBoost, Transformer, BayesianNN, DQN, PPO, MetaLearner
âœ… ê°•í™”í•™ìŠµ ë³´ìƒ	3~6ê°œ ì¼ì¹˜ ì‹œ ë³´ìƒ ì°¨ë“±, ë³´ë„ˆìŠ¤ ì—†ìŒ
âœ… Meta Learner	íšŒì°¨ë³„ ì¶”ì²œ ì„±ëŠ¥ ê¸°ë°˜ ê°€ì¤‘ì¹˜ ì¡°ì •
âœ… ì¶”ì²¨ê¸° ë³µì œ íŠ¹ì„±	distance_variance, cohesiveness_score, sequential_pair_rate ë“± ë¶„ì„ ë²¡í„° í¬í•¨

âœ… ì‹¤í–‰ íŒŒì¼ ê·œì¹™
src/run/ ì•ˆì—ì„œë§Œ ìƒì„±

íŒŒì¼ëª…: run{ë‹¨ê³„ë²ˆí˜¸}_{ì„¤ëª…}.py

run íŒŒì¼ì€ wrapperë§Œ ë‹´ë‹¹ (ë¡œì§ ì—†ìŒ)

âŒ src/test/ì—ì„œ ì‹¤í–‰ ë¶ˆê°€

âœ… ì½”ë“œ ë””ë ‰í† ë¦¬ ê³ ì •
í—ˆìš©ëœ ê²½ë¡œë§Œ ì‚¬ìš©:

src/analysis/, src/core/, src/environment/, src/evaluation/,
src/pipeline/, src/run/, src/shared/, src/training/, src/utils/,
src/models/,src/models/bayesian/,src/models/dl/,src/models/meta/,src/models/ml/,src/models/rl/

âŒ ìƒˆ í´ë”/ì„œë¸Œëª¨ë“ˆ ìƒì„± ê¸ˆì§€

âœ… ê³µí†µ ê¸°ëŠ¥ ëª¨ë“ˆ
ê¸°ëŠ¥	íŒŒì¼
ì„¤ì •	config_loader.py (config['key'] ë°©ì‹ë§Œ í—ˆìš©)
ë¡œê¹…	logger_config.py
ì„±ëŠ¥ ê¸°ë¡	performance_tracker.py, profiler.py
í•™ìŠµ AMP	cuda_optimizers.py (AMPTrainer ì‚¬ìš©)
ì €ì¥	model_saver.py, performance_report_writer.py
ë²¡í„° ê²€ì¦	feature_vector_validator.py
ë©”ëª¨ë¦¬	memory_manager.py, performance_utils.py

âœ… íŒŒì¼ I/O ê·œì¹™
ëª¨ë¸ ì €ì¥: savedModels/{model_name}.pt

ë¶„ì„ ê²°ê³¼: data/result/analysis/lottery_data_analysis.json

ë²¡í„°: data/cache/feature_vectors_full.npy, feature_vector_full.names.json

ì„±ëŠ¥ ë¦¬í¬íŠ¸: data/result/performance_reports/{module_name}_performance_report.json

âŒ ë‚ ì§œ í¬í•¨ ê¸ˆì§€

âœ… ê¸ˆì§€ ì‚¬í•­ (ê°•í™”)
run*.py ë‚´ ì§ì ‘ ë¡œì§ (ë¶„ì„, í•™ìŠµ, ì €ì¥, ì¶”ë¡  ë“±) ê¸ˆì§€

âŒ torch.save, argparse, CLI, get(...), safe_get(...) ê¸ˆì§€

âŒ íŒŒì¼ëª…ì— timestamp ì‚½ì… ê¸ˆì§€

âŒ hybrid_recommender.py ìƒì„± ê¸ˆì§€

âŒ Trainer í´ë˜ìŠ¤ ì§ì ‘ ìƒì† ê¸ˆì§€ (í†µì¼ëœ UnifiedTrainer ì‚¬ìš©)

âŒ ì°¨ì› ë¶ˆì¼ì¹˜ í—ˆìš© ì•ˆ ë¨ (allow_mismatch = false ê³ ì •)

âœ… ì¶”ê°€ì‚¬í•­
ê°œë°œì‹œ ì¤‘ë³µ í•¨ìˆ˜ ë° ì¤‘ë³µ ì†ŒìŠ¤ê°€ ìƒê¸°ì§€ ì•Šë„ë¡ ì¶©ë¶„íˆ ê²€í†  í›„ ì½”ë“œ ì‘ì„±
ìˆ˜ì •ì‹œ êµ¬í˜„ì´ ì™„ë£Œëœ í•¨ìˆ˜ê°€ ì‚¬ë¼ì§€ê±°ë‚˜ ë§ê°€ì§€ì§€ ì•Šê²Œ ì‹ ê²½ì¨ì„œ ì½”ë“œ ì‘ì„±


ğŸ“Œ ì„¤ì • ì ‘ê·¼ ê·œì¹™ (config.yaml)
ì´ ê·œì¹™ì€ ì„¤ì • ëˆ„ë½ìœ¼ë¡œ ì¸í•œ ë¬´ì˜ë¯¸í•œ fallback ë™ì‘ì„ ë°©ì§€í•˜ê³ ,
ëª¨ë“  ì„¤ì •ì´ ëª…ì‹œì ì´ë©° ê²€ì¦ ê°€ëŠ¥í•œ êµ¬ì¡°ë¡œ ìœ ì§€ë˜ë„ë¡ ê°•ì œí•˜ëŠ” ê²ƒì„ ëª©ì 

1. ì„¤ì • ê²½ë¡œ ê³ ì •
- ì„¤ì • íŒŒì¼ì€ ë°˜ë“œì‹œ ë‹¤ìŒ ê²½ë¡œì— ìœ„ì¹˜í•´ì•¼ í•¨:
  D:/VSworkSpace/DAEBAK_AI/lottery/config/config.yaml

2. ì„¤ì • ì ‘ê·¼ ë°©ì‹
- ëª¨ë“  ì„¤ì •ì€ ë°˜ë“œì‹œ ë‹¤ìŒ ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼í•´ì•¼ í•¨:
  config["key1"]["key2"]  ë˜ëŠ” config.get("key1").get("key2") ì™€ ê°™ì€ ì¤‘ì²© ì ‘ê·¼ì€ ê¸ˆì§€
- `safe_get(...)`, `config.get(..., default)` í˜•íƒœëŠ” ì ˆëŒ€ ì‚¬ìš© ê¸ˆì§€

3. í‚¤ ëˆ„ë½ ì‹œ ë™ì‘
- ì„¤ì • íŒŒì¼ì— ëª…ì‹œë˜ì§€ ì•Šì€ í‚¤ì— ì ‘ê·¼í•  ê²½ìš°:
  - ì¦‰ì‹œ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œì¼œì•¼ í•˜ë©°,
  - ë¡œê·¸ë¡œ `[ERROR] ì„¤ì • í‚¤ ëˆ„ë½: config['...']` ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ê³ 
  - ì „ì²´ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¤‘ë‹¨í•´ì•¼ í•¨ (ì˜ˆì™¸ ìºì¹˜ ê¸ˆì§€)

4. ê¸°ë³¸ê°’ í—ˆìš© ê¸ˆì§€
- config.yamlì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì„¤ì • í‚¤ëŠ” ì½”ë“œì—ì„œ ê¸°ë³¸ê°’(fallback)ì„ ì ìš©í•´ì„œëŠ” ì•ˆ ë¨
- ëª¨ë“  ì„¤ì • í‚¤ëŠ” config.yamlì— ë°˜ë“œì‹œ ëª…ì‹œë˜ì–´ ìˆì–´ì•¼ í•¨
- ìƒˆë¡œìš´ í‚¤ë¥¼ ì¶”ê°€í•  ê²½ìš°, ì„¤ì • íŒŒì¼ì„ ë¨¼ì € ìˆ˜ì •í•œ í›„ ì½”ë“œì—ì„œ ì‚¬ìš©í•´ì•¼ í•¨

5. ì˜¤ë¥˜ ì²˜ë¦¬ ì˜ˆì‹œ
try:
    value = config["training"]["use_filtered_vector"]
except KeyError as e:
    logger.error(f"[ERROR] ì„¤ì • í‚¤ ëˆ„ë½: {str(e)}")
    raise RuntimeError("ì„¤ì • í‚¤ ëˆ„ë½ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤.")

6. ì„¤ì • ì˜ˆì‹œ (config.yaml)
training:
  use_filtered_vector: true
vector:
  min_required_dimension: 70
paths:
  feature_vector_path: data/cache/feature_vector_full.npy
  name_file_path: data/cache/feature_vector_full.names.json
